digraph PolicyEngine {
 node [shape=box,style=filled,fillcolor=orange1]

 gp -> precession
 precession -> astrometrics
 gp -> rna
 rna -> geocentrics
 rna -> wasobs
 wasobs -> topocentrics [label=N]
 wasobs -> parallax [label=Y]
 parallax -> topocentrics
 parallax -> refraction
 refraction -> altaz

 gp [shape=box, label="Geocentric position"]
 precession [label=<precess coordinates to <FONT
  FACE="Inconsolata">epoch</FONT>>]
 rna [label="correct for refraction near Sun\ncorrect for nutation\ncorrect for aberration"]
 refraction [label="correct for refraction at horizon"]
 wasobs [shape=diamond, label=<<FONT FACE="Inconsolata">Observer</FONT
  ><BR/>provided?>]
 parallax [label="correct for parallax"]

 astrometrics [shape=box, label=<Astrometric coordinates
  <BR/><FONT FACE="Inconsolata">a_ra<BR/>a_dec</FONT>>]
 geocentrics [shape=box, label=<Geocentric coordinates
  <BR/><FONT FACE="Inconsolata">g_ra<BR/>g_dec</FONT>>]
 topocentrics [shape=box, label=<Topocentric coordinates
  <BR/><FONT FACE="Inconsolata">ra<BR/>dec</FONT>>]
 altaz [shape=box, label=<Position in Observer's sky
  <BR/><FONT FACE="Inconsolata">alt<BR/>az</FONT>>]

}
